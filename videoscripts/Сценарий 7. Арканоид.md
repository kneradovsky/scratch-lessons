# Часть 1

Сегодня мы будем делать игру, которая была очень популярна у твоих родителей. Она называется арканоид. Цель игры - отбивать ракеткой мячик и разбивать мячиком кирпичи. Когда все кирпичи разбиты - игрок победил. Если мячик улетает - теряется одна попытка. Игра выглядела примерно так. 

Мы с тобой сделаем эту игру. За два урока. Сегодня мы изучим всю необходимую теорию и сделаем поле игры с кирпичами. А на следующем уроке сделаем шарик и ракетку. Поехали. 

Во-первых, давай вернемся к истокам. В скратче мы программируем спрайты или объекты. Можно сказать, в очень сильном упрощении, что программирование в скратч - это объектно-ориентированное программирование. До этого мы работали только с одним объектом какого-то вида. Кот у нас был один, мышка одна. Единственный раз когда мы столкнулись с множеством одинаковых объектов - на уроке с движением кубиков. Но и тогда, для нас фактически существовал только один кубик. В арканоиде и у нас будет существовать множество кирпичей. То есть объектов вида кирпич. В программировании говорят "типа кирпич", а в объектно-ориентированном программировании такие тиаы называются "классы". Что же такое тогда наш отдельный кирпич? А это экземпляр класса кирпич. И каждый экземпляр - отдельный объект, он может выглядеть по-другому или вести себя по-другому. Например, смотри - на экране два кота. Один рыжий, а другой черный. Они разные, но в то же время они оба - коты. 

Давай подумаем, какие классы у нас будут? Их всего три - кирпич, шарик и ракетка. 

Что у нас умеет кирпич? Он должен вставать на свое место на поле и исчезать при попадании шарика. 
Ракетка - двигается вправо и влево при нажатии стрелок
Шарик - летает по полю и отскакивает от блоков, стен и ракетки. При достижении нижней стены - пропадает. 

Сегодня мы сделаем поле из кирпичей. Что означает "свое" место у кирпича. Представь, что поле у нас расчерчено на прямоугольники и в каждый прямоугольник мы размещаем наш кирпич. Это и будет его место. 

Если присмотреться к полю, то можно заметить, что прямоугольники составляют линии - горизонтальные (называются строки) и вертикальные (а это столбцы). И каждый прямоульник находится на пересечении этих линий. Значит положение прямоугольника задается номер строки и номером столбца. Например, 5 и 3. Ничего не напоминает? Правильно - это очень похоже на координаты x и y. 

А как нам располагать блоки в ячейках? Для начала давай договоримся, что у каждого кирпича будет свой номер. Смотри, я расположил 2 ряда кубиков и пронумеровал их 
1-4
5-8
Смотри у нас 4 столбца и во второй строке находятся прямоугольники с номерами от 5 до 8. А это 4+1, 4+2 и т.д. 
То есть можно представить в виде номер = число столбцов * номер_строки+номер_столбца
Стоп, у тебя вопрос - почему у нас строка вторая, а умножаем мы на 1. В программировании принято считать от нуля. Строка вторая, но номер у нее 1, а у первой строки номер - 0. Тогда получается, что в первой строке ячейки можно записать как 4*0+1 и т.д.

Но столбцы тоже нумеруются от 0. Тогда расположение кирпичей будет выглядеть так - 0-3,4-7
Как нам определить номер столбца для каждого блока - этот остаток от предыдущей строки. Я не зря сказал, остаток - в языках программирования есть такой оператор - остаток от деления. То есть то, чего не хватает до следующей части. Например, нам нужно поделить пополам 5 яблок. Получается каждому по 2 и еще одно яблоко остается - это и есть остаток. 

Теперь мы знаем как из номера кирпича получить строку и столбец 
строка - номер разделить на число столбцов
столбец - остаток от деления номера на число столбцов

Посмотри, на слайде нарисовано как мы будет определять координаты для кирпича. 
Нам нужно хранить размеры кирпича, его номер и хорошо бы еще хранить начальные координаты. Координаты от которых мы будем вести отсчет. А для хранения мы используем переменные. Размеры и начальные координаты будут общие для всех кирпчей, а номер у каждого свой. Значит номер будет локальной переменной - видимой только внутри кирпича. 

Пока ты не начал зевать от такого количества теории давай скорее приступать к написанию программы.

Давай сначала нарисуем кирпич. 
Теперь код
Начинаем с зеленого флага. 
Нам нужно сохранить начальные координаты, размеры кирпича и число столбцов. 
Для координат эти блоки
Для размеров эти

Теперь будем создавать объекты-клоны нашего кирпича, каждый с собственным номером. 
Для этого заводим переменную номер блока и делаем ее локальной. 
Далее делаем цикл по количеству блоков, например 40
И на каждом шаге увеличиваем номер и создаем клона. Клон скопирует себе переменную номер со значением на этом шаге. На следующем шаге будет другое значени и другой клон скопирует себе уже новое значение. Таким образом получается, что у каждого клона свой номер. 

Теперь переходи к клону. Он должен себя поставить по правильным координатам. Для остатка от деления в scratch используется оператор mod. 
X мы расчитываем так, а У - так 
Для Y мы еще используем оператор ближайшее меньшее целое, чтобы отбасывать остаток от деления для строк. 

Так программа для поля готова. Запускаем - у тебя должно создастся поле из 40 кирпичей - 5 строк по 8 кирпичей в каждой. 
Здорово. В следующий раз будем делать шарик и ракетку. 

Сегодня будет домашнее задание - подумай как сделать так, чтобы кирпичи отличались. Нельзя менять размер - от него зависит положение кирпича. Все остальное можно. Подумай, что можно изменить, чтобы кирпичи остались кирпичами, но стали разные. 
И сделай ракетку и запрограммируй ее движение при нажатии клавишь. Мы так уже делали, я знаю что у тебя получится. 

Если у тебя есть вопросы - задавай их в комментариях. А сейчас пока и до новых встреч. 

# Часть 2

Привет. Это канал Papacoder-один-ноль-один где мы учимся программировать. Эта серия уроков посвящена разработке на Scratch игры арканоид. На прошлом уроке мы сделали игровое поле, а сегодня будем учить шарик летать и разбивать блоки. Ссылка на плейлист будет в подсказках и справа от этого видео. Этот урок не последний, поэтому подпишись и включи оповещение о новых видео (колокольчик), чтобы не пропустить следующий выпуск.

Итак на чем мы остановились. Мы сделали поле из 40 кирпичей. Домашнее задание было сделать кирпичи разноцветными. Получилось у тебя это сделать? 

Правильным решением было использовать эффект цвет на клоне. А в качестве значения нужно было взять что-то, что разное у каждого кирпича. А это - его номер. Если просто поставить номер в цвет, то цвет будет меняться очень медленно. Как его ускорить? Посмотри на картинку - три линии. Они показывают как изменяется эффект в зависимости от номера. В первом случае при изменении номер на 1, эффект меняется на 1. Во втором случае при изменении на 1, эффект меняется на 2, а в третьем на 4. На что это похоже? Вспомни таблицу умножения. Возьмем номер 2 - 2 * 1 = 2, 2 * 2 = 4, 2 * 4 = 8 
Для ускорения изменений нам нужно умножить номер на какое-то число. Тогда скорость изменения эффекта возрастает. 
Давай сделаем 4. Смотри какая красота получилась. 

Сегодня мы будем учить шарик летать и разбивать блоки. Давай сначала сделаем шарик. В прошлый раз я говорил про размеры, но явно не показал где их посмотреть. Размер указывается в левом верхнем углу рядом маленьким изображением объекта. 
Шарик. Давай сделаем круг размером 10-15. И серого цвета. Готово

Как ты помнишь, объекты делают шаги в направлении своего "взгляда", и это направление задается одноименным параметром - вот этим. Поэтому наш шарик должен просто делать шаги вперед. Направление он будет менять при отскоке от препятствия и это мы будем делать в следующем уроке. Сегодня только вперед :) 

Значит у нас должен быть цикл повротять всегда и внутри него - сделать 2 шага. 
А теперь вопрос - Когда шарик должен начинать движение? При запуске программы или позже? Давай посмотрим. Запускаем программу и видим, что формирование поля занимает какое-то время. Значит шарик должен полететь после завершения поля. Как это сделать? Очень просто - отправим сообщение "поле готово". 

Изменяем код кирпича вот так. А шарика вот так. Кирпич после завершения поля отправляет сообщение о том, что оно готов, а шарик начинает лететь только после  получения этого сообщения. 

Шарик должен разбивать кирпичи. Подумаем как. У нас есть сенсор "касается". Кто будет проверять касание? шарик или кирпич? 
Если проверять будет шарик, то он должен как-то сказать кирпичу, что он на него наткнулся. Но это должно быть не просто сообщение, а сообщение персонально кирпичу, в который мы врезались. Это сложно и может вызвать ошибки. 
Гораздо проще, чтобы кирпич ждал пока в него врежется шарик и исчезал. Или уничтожал клон. Получается вот такой код - ждать пока столкнемся и уничтожаем клон. Давай проверим как уничтожаются кирпичи. 

Ставим шарик так. Запускаем. Уничтожились. Вот так - уничтожились. Вот так - один почему-то остался. Если ты обратишь внимание - это наш начальный кирпич. Он не исчез потому что он не клон и команда "уничтожить клон" на него не действует. 
Что же делать? Пусть он исчезнет при формировании поля, а на место него встанет клон. Нам для этого нужно увеличить счетчик клонов на 1 и менять номер после создания клона, а не до. Вот так. И добавляем исчезновение оригинала. 

Запускаем и проверяем. Сейчас все работает как надо. 
На этом мы закончим этот урок. Домашнее задание будет такое - сделай ракетку и напиши код, чтобы она управлялась стрелками вправо и влево. Мы уже делали такое на прошлых уроках, поэтому у тебя должно это получиться без труда. 

В следующий раз ты уже сможешь поиграть в свою игру. Ссылка на результат этого урока в описании. Жду тебя на следующем уроке, пока. 





# Часть 3

Привет. Сегодня мы продолжим прошлый урок по созданию игры арканоид. В конце этого урока у нас будет работающая игра. 

И думаю, что с ракеткой у тебя тоже не возникло проблем. Получилось вот так? 

В прошлый раз мы научили шарик летать и разбивать кирпичи. Осталось научить его отскакивать от предметов - кирпичей, краев сцены и ракетки. 

При отскоке Шарик должен менять направление, но как? Как мы должны менять угол, чтобы казалось, что шарик отскакивает.  Углы у нас меняются от -180 до 180. Если мы вводим число, которое выпадает из этого диапазона,  то scratch автоматически пересчитывает его в этот диапазон значений. Смотри (демо вращения кота) я буду вводить разные значения и посмотри как поворачивается кот. 

Давай теперь рассмотрим картинки. Шарик может подлетать снизу, сверху, справа и слева.

На самом деле нам нужно рассмотреть только две ситуации - горизонтальная стенка и вертикальная. 
Посмотри, для вертикальной стенки мы должны просто поменять знак, а для горизонтальной - вычесть старое направление из 180 градусов. Проверим? 

Значит нам нужно будет 2 отскока. вертикальный и горизонтальный. Как их отслеживать? 
Есть два пути - очевидный и скратчевый :) Очевидный - это сделать условия в зависимости от координат шарика. Но это сложно и может привести к ошибкам выполнения. А скратчевый - сделать стенки. Вертикальные и горизонтальные. При касании шариком вертикальной стенки будет отправляться одно сообщение, а при касании горизонтальной или ракетки - другое. 

А если у нас будут стенки, то мы очень просто решим задачу определения "падения" шарика. Сделаем нижнюю стенку и при ее касании будет останавливать игру. 

Давай подведем итоги. Нам потребуется 2 сообщения для отскока и переменная для определения пропадания шарика. 
Кроме этого нам потребуется еще одно сообщение. Пока не буду говорить какое - попробуй догадаться. 

Приступаем к составлению программы. Начнем со стенок. 

Верх, право, лево. 
У них будут одинаковые программы. Когда касание - отправить сообщение. И повторять до конца игры

Ракетка - то же самое. 
Низ - остановить игру при касании. 

Теперь шарик. 
Пока не конец игры - летаем. 
При получении сообщений меняем направление. 


И еще одно. Давай сделаем так, чтобы шарик начинал летать в случайном направлении. Вот так. 

Готово, запускаем. 
Поиграй какое-то время. Смотри, шарик отскакивает всегда одинаково, а это неправильно и не интересно. Домашним заданием будет сделать так, чтобы шарик отскакивал случайным образом. Даю подсказку - добавляй случайное значение к направлению при отскоке. 

На следующем уроке мы добавим шарику "жизни", будем считать очки и научим кирпич взрываться. А сейчас приступай к домашнему заданию. 

Если тебе что-то непонятно - задай вопрос в комментариях. А сейчас - пока. 

# Часть 4
Сегодня у нас завершающий урок по разработке игры Арканоид. Мы добавим эффект к исчезновению кубика, сделаем подсчет очков и добавим попытки нашему шарику. Но сначала домашнее задание? ты его сделал? Я покажу результат и расскажу почему так. 
Смотри, для вертикального отскока я прочто добавляю случаное число в диапазоне от -20 до 20, а для горизонтального отскока добавляю такое же случаное число к 180 и это дает нам случайное число в диапазоне от 160 до 200. Теперь шарик у нас будет летать случайным образом. 

Вернемся к теме сегодняшнего урока: Как мы будем считать очки и попытки? Правильно через переменные - они у нас память программы, пусть и хранят эти значения. Создаем две глобальные переменные - попытки и очки. Сразу выводим их на нашу сцену. В верхней части экрана. Чтобы шарик не залетал по эти переменные, мы сдвинем вниз верхнюю границу. Вот так. 

Давай начнем с подсчета очков. мы будем увеличивать счетчик очков при каждом попадании шарика в кирпич. Значи мы должны увеличить значение переменной на 1. И давай еще добавим эффект "схлопывания" к нашему шарику. Будем перед исчезновением 3 раза уменьшать его размер. Вот таким образом: Повторять 3 раза. А потом исчезнем

Давай подумаем? Где мы будем считать попытки? Там где определяем конец попытки - в нижней границе. При попадании шарика уменьшаем число попыток на 1. А что делаем дальше? Будем посылать сообщения. Если еще есть попытки, то мы посылаем "новая попытка", а если нет "конец игры". Давай так и сделаем, будем использовать блок если-иначе
И нам нужно добавить еще начальные значения для наших переменных очки и попытки и запустить самую первую попытку. 

А что дальше? Дальше мы должны перегенерировать поле и перезапустить шарик с начального места. Как это лучше сделать? На мой взгляд - лучше сделать еще 2 объекта. Это будут объекты транспаранты. Один для конца игры, а второй для конца игры. 
При конце игры будет показываться "конец игры", а при новой попытке будет идти обратный отсчет. Давай начнем с конца, конца игры. Создаем новый объект на базе крестика и добавляем текст "конец игры". Координаты у него будут 0,0 - середина сцены. 
Программа будет простая - спрятаться при старте и показаться при получении "конец игры". 

Теперь сделаем плакат для новой попытки. Делаем новый объект. Пусть это будет овал, а в нем будет написано приготовились и пойдет обратный отсчет. Мы его сделаем при помощи переключения костюмов. Первый костюм, приготовились 3, на красном фоне. Чтобы сэкономить время дублируем его. Меняем 3 на 2 и цвет на желтый. Дублируем - 1 и зеленый. 

Теперь программа. Пока мы не закончим отсчет шарик будет стоять. Поэтому задаем стоп=1. И начинаем анимацию. нам достаточно пройти по всем костюмам 1 раз. для этого используем цикл и блок следующий костюм. А как нам сказать с какого костюма начинаем? Следующий костюм переключаем костюмы по кругу, поэтому мы можем задать последний и тогда при входе в цикл он переключится на первый. И еще нам нужно показаться в начале и спрятаться в конце. 
После отсчета передаем сообщение "поле готово". А где оно у нас еще передается? в кирпиче, давай уберем его оттуда.  

Что у нас получилось. При новой попытке мы должны сбросить положение шарика и ракетки. Для шарика выделяем установку начального значение в отдельный обработчик, а для ракеты - меняем зеленый флаг на попытку. 

Ура. мы закончили с арканоидом. Ты можешь поиграть и показать своим друзьям - проектам в скратч можно делиться. А я подумаю какую еще игру мы сможем сделать. Пиши комментарии я буду на них отвечать. До встречи на следующих уроках. Кажется у меня появилась какую игру мы будем делать. :) Пока. 





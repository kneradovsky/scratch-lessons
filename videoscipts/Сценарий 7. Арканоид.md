# Часть 1

Сегодня мы будем делать игру, которая была очень популярна у твоих родителей. Она называется арканоид. Цель игры - отбивать ракеткой мячик и разбивать мячиком кирпичи. Когда все кирпичи разбиты - игрок победил. Если мячик улетает - теряется одна попытка. Игра выглядела примерно так. 

Мы с тобой сделаем эту игру. За два урока. Сегодня мы изучим всю необходимую теорию и сделаем поле игры с кирпичами. А на следующем уроке сделаем шарик и ракетку. Поехали. 

Во-первых, давай вернемся к истокам. В скратче мы программируем спрайты или объекты. Можно сказать, в очень сильном упрощении, что программирование в скратч - это объектно-ориентированное программирование. До этого мы работали только с одним объектом какого-то вида. Кот у нас был один, мышка одна. Единственный раз когда мы столкнулись с множеством одинаковых объектов - на уроке с движением кубиков. Но и тогда, для нас фактически существовал только один кубик. В арканоиде и у нас будет существовать множество кирпичей. То есть объектов вида кирпич. В программировании говорят "типа кирпич", а в объектно-ориентированном программировании такие тиаы называются "классы". Что же такое тогда наш отдельный кирпич? А это экземпляр класса кирпич. И каждый экземпляр - отдельный объект, он может выглядеть по-другому или вести себя по-другому. Например, смотри - на экране два кота. Один рыжий, а другой черный. Они разные, но в то же время они оба - коты. 

Давай подумаем, какие классы у нас будут? Их всего три - кирпич, шарик и ракетка. 

Что у нас умеет кирпич? Он должен вставать на свое место на поле и исчезать при попадании шарика. 
Ракетка - двигается вправо и влево при нажатии стрелок
Шарик - летает по полю и отскакивает от блоков, стен и ракетки. При достижении нижней стены - пропадает. 

Сегодня мы сделаем поле из кирпичей. Что означает "свое" место у кирпича. Представь, что поле у нас расчерчено на прямоугольники и в каждый прямоугольник мы размещаем наш кирпич. Это и будет его место. 

Если присмотреться к полю, то можно заметить, что прямоугольники составляют линии - горизонтальные (называются строки) и вертикальные (а это столбцы). И каждый прямоульник находится на пересечении этих линий. Значит положение прямоугольника задается номер строки и номером столбца. Например, 5 и 3. Ничего не напоминает? Правильно - это очень похоже на координаты x и y. 

А как нам располагать блоки в ячейках? Для начала давай договоримся, что у каждого кирпича будет свой номер. Смотри, я расположил 2 ряда кубиков и пронумеровал их 
1-4
5-8
Смотри у нас 4 столбца и во второй строке находятся прямоугольники с номерами от 5 до 8. А это 4+1, 4+2 и т.д. 
То есть можно представить в виде номер = число столбцов * номер_строки+номер_столбца
Стоп, у тебя вопрос - почему у нас строка вторая, а умножаем мы на 1. В программировании принято считать от нуля. Строка вторая, но номер у нее 1, а у первой строки номер - 0. Тогда получается, что в первой строке ячейки можно записать как 4*0+1 и т.д.

Но столбцы тоже нумеруются от 0. Тогда расположение кирпичей будет выглядеть так - 0-3,4-7
Как нам определить номер столбца для каждого блока - этот остаток от предыдущей строки. Я не зря сказал, остаток - в языках программирования есть такой оператор - остаток от деления. То есть то, чего не хватает до следующей части. Например, нам нужно поделить пополам 5 яблок. Получается каждому по 2 и еще одно яблоко остается - это и есть остаток. 

Теперь мы знаем как из номера кирпича получить строку и столбец 
строка - номер разделить на число столбцов
столбец - остаток от деления номера на число столбцов

Посмотри, на слайде нарисовано как мы будет определять координаты для кирпича. 
Нам нужно хранить размеры кирпича, его номер и хорошо бы еще хранить начальные координаты. Координаты от которых мы будем вести отсчет. А для хранения мы используем переменные. Размеры и начальные координаты будут общие для всех кирпчей, а номер у каждого свой. Значит номер будет локальной переменной - видимой только внутри кирпича. 

Пока ты не начал зевать от такого количества теории давай скорее приступать к написанию программы.

Давай сначала нарисуем кирпич. 
Теперь код
Начинаем с зеленого флага. 
Нам нужно сохранить начальные координаты, размеры кирпича и число столбцов. 
Для координат эти блоки
Для размеров эти

Теперь будем создавать объекты-клоны нашего кирпича, каждый с собственным номером. 
Для этого заводим переменную номер блока и делаем ее локальной. 
Далее делаем цикл по количеству блоков, например 40
И на каждом шаге увеличиваем номер и создаем клона. Клон скопирует себе переменную номер со значением на этом шаге. На следующем шаге будет другое значени и другой клон скопирует себе уже новое значение. Таким образом получается, что у каждого клона свой номер. 

Теперь переходи к клону. Он должен себя поставить по правильным координатам. Для остатка от деления в scratch используется оператор mod. 
X мы расчитываем так, а У - так 
Для Y мы еще используем оператор ближайшее меньшее целое, чтобы отбасывать остаток от деления для строк. 

Так программа для поля готова. Запускаем - у тебя должно создастся поле из 40 кирпичей - 5 строк по 8 кирпичей в каждой. 
Здорово. В следующий раз будем делать шарик и ракетку. 

Сегодня будет домашнее задание - подумай как сделать так, чтобы кирпичи отличались. Нельзя менять размер - от него зависит положение кирпича. Все остальное можно. Подумай, что можно изменить, чтобы кирпичи остались кирпичами, но стали разные. 
И сделай ракетку и запрограммируй ее движение при нажатии клавишь. Мы так уже делали, я знаю что у тебя получится. 

Если у тебя есть вопросы - задавай их в комментариях. А сейчас пока и до новых встреч. 

# Часть 2

Привет. Сегодня мы продолжим прошлый урок по созданию игры арканоид. В конце этого урока у нас будет работающая игра. 

Получилось решить домашнее задание? Давай проверим. Самый простой способ сделать кирпичи разными - это использовать эффект "цвет". А для управления "количеством" этого эффекта можно использовать номер блока. Вот так. 
И думаю, что с ракеткой у тебя тоже не возникло проблем. Получилось вот так? 

У нас остался шарик. Шарик должен летать и отскакивать. 
С полетом все просто  - это обычные шаги в направлении вперед. А что должно происходить при отскоке? 

Шарик должен менять направление, но как? Как мы должны менять угол, чтобы казалось, что шарик отскакивает.  Углы у нас меняются от -180 до 180. Если мы вводим большее или меньшее число, то scratch автоматически пересчитывает его в этот диапазон значений. Смотри (демо вращения кота)
Давай теперь рассмотрим картинки. Шарик может подлетать снизу, сверху, справа и слева.

На самом деле нам нужно рассмотреть только две ситуации - горизонтальная стенка и вертикальная. 
Посмотри, для вертикальной стенки мы должны просто поменять знак, а для горизонтальной - вычесть старое направление из 180 градусов. Проверим? 

Значит нам нужно будет 2 отскока. вертикальный и горизонтальный. Как их отслеживать? 
Есть два пути - очевидный и скратчевый :) Очевидный - это сделать условия в зависимости от координат шарика. Но это сложно и может привести к ошибкам выполнения. А скратчевый - сделать стенки. Вертикальные и горизонтальные. При касании шариком вертикальной стенки будет отправляться одно сообщение, а при касании горизонтальной или ракетки - другое. 

А если у нас будут стенки, то мы очень просто решим задачу определения "падения" шарика. Сделаем нижнюю стенку и при ее касании будет останавливать игру. 

Давай подведем итоги. Нам потребуется 2 сообщения для отскока и переменная для определения пропадания шарика. 
Кроме этого нам потребуется еще одно сообщение. Пока не буду говорить какое - попробуй догадаться. 

Приступаем к составлению программы. Начнем со стенок. 

Верх, право, лево. 
У них будут одинаковые программы. Когда касание - отправить сообщение. И повторять до конца игры

Ракетка - то же самое. 
Низ - остановить игру при касании. 

Теперь шарик. 
Пока не конец игры - летаем. 
При получении сообщений меняем направление. 

Нам еще нужно доработать кирпич. Он должен исчезать при попадании шарика. Используем блок уничтожить клон. 

Почти готово. если ты сейчас запустишь программу, то увидишь, что шарик полетит пока поле еще не будет завершено. Знчит нам нужно как-то понять когда поле завершится и только тогда запускать шарик. Как это сделать? Помнишь я говорил про еще одно сообщение? Вот здесь оно нам и пригодится. Шарик полетит только после построения поля. 

И еще одно. Давай сделаем так, чтобы шарик начинал летать в случайном направлении. Вот так. 

Готово, запускаем. 
Поиграй какое-то время. Смотри, шарик отскакивает всегда одинаково, а это неправильно и не интересно. Домашним заданием будет сделать так, чтобы шарик отскакивал случайным образом. Даю подсказку - добавляй случайное значение к направлению при отскоке. 

На следующем уроке мы добавим шарику "жизни" и будем считать очки. А сейчас приступай к домашнему заданию. 

Если тебе что-то непонятно - задай вопрос в комментариях. А сейчас - пока. 

